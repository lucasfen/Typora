## 项目名称：邮件服务平台

项目描述：邮件服务平台主要给云平台提供可靠的邮件服务，包括用于用户注册使用的验证码邮件，以及针对商城用户的营销邮件。其中验证码邮件需要较高的可靠性， 营销邮件需要每天发送大约十万封邮件。

设计技术：

1.针对错误邮箱过多导致邮件退回率过高的问题，利用AWS SNS服务，SNS服务是AWS提供的基于发布订阅模式的消息通知服务。在订阅相关邮箱主题后，可以获取从该邮箱发送的邮件的送达情况，确定该邮箱是否是问题邮箱。在下次发送邮件时过滤掉问题邮件，避免问题邮件的重复发送，有效降低了邮件退回率。 

2.针对验证码邮件的可靠性问题，使用resilience4j熔断器，利用熔断器提供的降级方法，在第一次邮件发送出错时，在降级方法中进行二次发送，实现邮件重发，提高了发送邮件的可靠性。

3.基于多线程，实现快速发送大量营销邮件功能

项目收获：

## 项目名称：商城积分系统

项目描述：为公司刚上线的商城配套开发积分系统，用户可以通过签到、在商城消费等方式获取积分， 用户可以利用积分购买限定产品，系统主要功能包括用户获取积分，消费积分等。

设计技术：

1.基于kafka， 将用户获取积分的消息写入，由积分系统进行消费，实现获取积分功能与积分管理功能解耦。

2.利用redis的分布式锁，处理分布式积分过度消费问题

3.利用redis实现用户积分排序，用户签到功能

4.基于spring事务， 处理积分消费失败回滚问题

## 面试知识点：

### 多线程

十万封邮件，分100批，每批1000封，100个任务，每个任务发10封邮件，每个任务花费时间1s,核心线程池大小为5，则50封/秒，最大线程池大小为200, 阻塞队列大小为200， 

### kafka

### redis

使用zset实现月积分排序， zadd month points  userId, 

积分的设计：分数+ . + （9999999999 - 秒级当前时间戳）

使用bitmap实现用户签到

使用bitmap实现月签到，用户每月存一条签到数据，用户1月6号签到：

setbit u:sign:uid:202201 6 1

### spring事务



### 熔断器



